<div layout="column" layout-fill ng-controller="SearchResultController as searchResultCtrl"
      ng-init="searchResultCtrl.searchResultDecorate()">
  <div class="content-container">

    <md-toolbar md-scroll-shrink>
      <div class="md-toolbar-tools">
        <a ui-sref="ticket_search" class="toolbar-back-button">
          <ng-md-icon icon="chevron_left" size="35px" class="white-text"></ng-md-icon>
        </a>

        <span class="white-text search-result-header">
          {{ searchResultCtrl.resultDecorator.attributes['from'] }}
          <ng-md-icon icon="arrow_forward"></ng-md-icon>
          {{ searchResultCtrl.resultDecorator.attributes['to'] }}
        </span>
      </div>
    </md-toolbar>

    <md-content class="routes-container">

      <av-loading></av-loading>

      <md-list ng-if="searchResultCtrl.resultDecorator.hasResult()">

        <search-result result="searchResultCtrl.resultDecorator.result['data']"
                       departure-available="searchResultCtrl.resultDecorator"
                       show-bottom-sheet="searchResultCtrl.showBottomSheet()"
                       show-details="searchResultCtrl.showDetails()">
        </search-result>

      </md-list>

      <div ng-if="searchResultCtrl.resultDecorator.hasSuggested()">
        <p class="suggested-routes">
          Currently, we have not found any bus departure from <b>{{ searchResultCtrl.resultDecorator.attributes['from'] }}</b>
          to <b>{{ searchResultCtrl.resultDecorator.attributes['to'] }}</b>. But, you might consider these trip(s) that our fellows did to reach <b>{{ searchResultCtrl.resultDecorator.attributes['to'] }}</b>.
        </p>

        <p ng-repeat="suggestedRoute in searchResultCtrl.resultDecorator.result['data']" class="suggested-routes">
          <b>{{ $index + 1 }}</b>.
          <b ng-click="searchResultCtrl.findSuggestedTickets(searchResultCtrl.resultDecorator.attributes['from'], suggestedRoute['name'])" class="success-text">
            {{ searchResultCtrl.resultDecorator.attributes['from'] }} to {{ suggestedRoute['name'] }}
          </b> and
          <b ng-click="searchResultCtrl.findSuggestedTickets(suggestedRoute['name'], searchResultCtrl.resultDecorator.attributes['to'])" class="success-text">
            {{ suggestedRoute['name'] }} to {{ searchResultCtrl.resultDecorator.attributes['to'] }}
          </b>
        </p>
      </div>

      <div ng-if="searchResultCtrl.resultDecorator.hasNoSuggested() || searchResultCtrl.resultDecorator.hasTypo() ||
       searchResultCtrl.findTicketError">
        <p class="no-result-message">
          Searched route is not available. Please try another route or contact us on live chat for sure!
        </p>
      </div>

    </md-content>
  </div>
</div>

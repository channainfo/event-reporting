<div ng-controller="TicketSearchController as search">

  <md-toolbar>
    <div class="md-toolbar-tools">
      <a ui-sref="main" class="toolbar-back-button">
        <ng-md-icon icon="chevron_left" size="35px" class="white-text"></ng-md-icon>
      </a>
      <div class="white-text">
        Search Ticket
      </div>
    </div>
  </md-toolbar>

  <div flex layout="row" layout-padding layout-wrap layout-align="center start">

    <div flex="100" class="av-flash ticket-search-flash-message"> </div>

    <div flex="10" class="ticket-search-icon">
      <div class="search-boarding-icon"><ng-md-icon icon="panorama_fisheye" class="boarding-dropoff-icon"></ng-md-icon></div>
      <div class="ticket-search-boarding-dropoff-line"></div>
      <div class="search-dropoff-icon"><ng-md-icon icon="lens" class="boarding-dropoff-icon"></ng-md-icon></div>
    </div>

    <div flex="90" layout="row" layout-wrap class="ticket-search-input-container">
      <md-input-container class="ticket-search-origin">
        <label>Origin</label>
        <md-select ng-model="search.params.from" md-on-open="search.loadOrigins()">
          <md-option ng-repeat="origin in search.origins" ng-value="origin.attributes['name']"
                     ng-disabled="search.params.to == origin.attributes['name']">
            {{ origin.attributes['name'] }}
          </md-option>
        </md-select>
      </md-input-container>

      <div ng-click='search.swapLocation()' class="search-ticket-swap-icon">
        <ng-md-icon icon="swap_vertial_circle"></ng-md-icon>
      </div>

      <md-input-container class="ticket-search-destination">
        <label>Destination</label>
        <md-select ng-model="search.params.to" md-on-open="search.loadDestinations()">
          <md-option ng-repeat="destination in search.destinations" ng-value="destination.attributes['name']"
                     ng-disabled="search.params.from == destination.attributes['name']">
            {{ destination.attributes['name'] }}
          </md-option>
        </md-select>
      </md-input-container>
    </div>

    <p> </p>

    <div flex="100" class="ticket-search-date">
      <md-datepicker ng-model="search.params['on_date']"
                     md-min-date="search.config.minDate"
                     md-placeholder="Enter date">
      </md-datepicker>
    </div>

    <div flex="100" class="ticket-search-button">
      <md-button ng-click="search.findTickets()" class="md-raised md-accent md-hue-3 white-text bold-text btn-search">
        <ng-md-icon icon="search" class="white-text"></ng-md-icon>Find Tickets
      </md-button>
    </div>
  </div>

</div>
